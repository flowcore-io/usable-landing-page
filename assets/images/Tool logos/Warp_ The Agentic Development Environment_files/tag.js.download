!function(){"use strict";function e(e,t,n,o){return new(n||(n=Promise))((function(s,c){function i(e){try{r(o.next(e))}catch(e){c(e)}}function a(e){try{r(o.throw(e))}catch(e){c(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}r((o=o.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const t={events:{},loadConfig:function(t){return e(this,void 0,void 0,(function*(){return{}}))},notify:function(e,t){},log:function(...e){}};function n(){return t}function o(e){if(e.id&&!t.id&&(t.id=e.id),e.tagVersion&&!t.tagVersion&&(t.tagVersion=e.tagVersion),e.configVersion&&!t.configVersion&&(t.configVersion=e.configVersion),e.loadConfig&&(t.loadConfig=e.loadConfig),e.notify&&(t.notify=e.notify),e.events){t.events||(t.events={});for(const[n,o]of Object.entries(e.events))t.events[n.toLowerCase()]=o}}const s={};function c(e){e.started&&!s.started&&(s.started=e.started),e.config&&!s.config&&(s.config=e.config),e.loaded&&!s.loaded&&(s.loaded=e.loaded),e.event&&!s.event&&(s.event=e.event)}function i(e){return Math.floor(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())).toString()}const a="denied",r="ad_personalization",f="ad_user_data",d=new URLSearchParams;function l(e){return d.get(e)!=a}function u(e){return d.get(e)===a?"0":"1"}function v(e,t){if("get"===e&&"function"==typeof t){const e={};d.forEach(((t,n)=>{e[n]=t})),t(e)}else if("default"===e)for(const[e,n]of Object.entries(t))d.has(e)||d.set(e,n);else if("update"===e)for(const[e,n]of Object.entries(t))d.set(e,n)}const g=new URLSearchParams;function h(e){for(const[t,n]of e)g.set(t,n)}const w=/(?<={)[^}]+(?=})/g,p=/^\/wpm@[^\/]+\/custom\/web-pixel-[^\/]+\/sandbox\/modern/,b="_tvid",m="_tvv",y="_tvz",_="_tvc",S="_tvh",V="_tvp";function O(e){fetch(e,{keepalive:!0,credentials:"include"}).catch((function(){}))}function j(e,t){let n=e.url;const o=n.match(w);if(o)for(const e of o)n=n.replace(`{${e}}`,t.get(e)||"");O(n)}function C(e,t){switch(e.type){case"image":default:j(e,t);break;case"beeswax":!function(e,t){const n=new URLSearchParams;n.set("buzz_key","tvads"),n.set("account_id","2"),n.set("ord",t.get("cachebuster")||"");for(const[o,s]of Object.entries(e)){let e=s.toString();const c=e.match(w);if(c)for(const n of c)e=e.replace(`{${n}}`,t.get(n)||"");n.set(o,e)}O("https://cnv.event.prod.bidr.io/log/cnv?"+n.toString())}(e,t)}}function L(e,t){var o,a,d;c({event:new Date}),e=e.toLowerCase();const v=new URLSearchParams;new URLSearchParams(g).forEach(((e,t)=>{v.set(t,e)})),t&&Object.entries(t).forEach((([e,t])=>{v.set(e,t)})),v.set(b,n().id||""),v.set(m,n().tagVersion||""),v.set(y,n().configVersion||""),v.set(_,u(r)+u(f)),function(){const e=new URLSearchParams;return s.started&&e.set("_tvs",i(s.started)),s.config&&e.set("_tvr",i(s.config)),s.loaded&&e.set("_tvl",i(s.loaded)),s.event&&e.set("_tve",i(s.event)),e}().forEach(((e,t)=>{v.set(t,e)}));try{const e=window.document.location;v.set(S,e.hostname);const t=e.pathname.replace(p,"");v.set(V,t)}catch(e){}v.sort();const h=Math.floor(1e10*Math.random());v.set("cachebuster",h.toString());const w=null===(o=n().events)||void 0===o?void 0:o[e];if(w){if(w.consent)for(const e of w.consent)if(!l(e))return;if(w.pixels)for(const e of w.pixels)C(e,v)}v.delete("cachebuster"),null===(d=(a=n()).notify)||void 0===d||d.call(a,e,v)}function D(e){const t=Array.prototype.slice.call(e),n=t.shift();switch(n){case"js":case"config":break;case"get":s=t[0],(t[1]||console.log)(g.get(s)||"");break;case"set":o=t[0],h(Object.entries(o||{}));break;case"event":L(t[0],t[1]);break;case"consent":v(t[0],t[1]);break;default:throw new Error(`action ${n} is not recognized`)}var o,s}function k(){window.tvads.push(arguments)}window.tvads=window.tvads||[],o({tagVersion:"1.0.11",notify:function(e,n){fetch("https://tag.tvads.ai/tag/v1/event/"+encodeURIComponent(e.toLowerCase()),{method:"POST",mode:"no-cors",keepalive:!0,credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()}).catch(function(){})},loadConfig:function(e){return fetch("https://tag.tvads.ai/tag/v1/configs/"+encodeURIComponent(e)+".json").then(e=>e.json())},log:undefined}),"complete"===document.readyState||"interactive"===document.readyState?k.call(null,"event","pageView"):window.document.addEventListener("DOMContentLoaded",(()=>{k.call(null,"event","pageView")})),setTimeout((()=>{!function(){let e=window.tvads.shift(),t=Array.prototype.slice.call(e),s=t.shift();"js"===s?(c({started:t[0]||new Date}),e=window.tvads.shift(),t=Array.prototype.slice.call(e),s=t.shift()):c({started:new Date}),"config"===s&&function(e,t,s){var i,a;c({config:new Date}),o({id:e}),h(Object.entries(t||{})),null===(a=null===(i=n())||void 0===i?void 0:i.loadConfig)||void 0===a||a.call(i,e).then((e=>{c({loaded:new Date}),e.config&&h(Object.entries(e.config||{})),e.consent&&v("default",e.consent),o({configVersion:e.version,events:e.events}),s()})).catch((e=>console.error(e)))}(t[0],t[1],(()=>{for(;window.tvads.length;){const e=window.tvads.shift();e&&D(e)}window.tvads.push=(...e)=>{for(const t of e)D(t);return 0}}))}()}),0)}();
