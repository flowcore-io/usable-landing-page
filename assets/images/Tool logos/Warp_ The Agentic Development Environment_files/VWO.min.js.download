var VWO_RS=function(e){"use strict";const t={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}};const i=e=>`rudder.${e.trim()}`;const n=new class{constructor(e,i){this.level=+i||t.ERROR.value,this.scope=e||""}setLogLevel(e){if(e&&"string"==typeof e){const i=e.toUpperCase();this.level=t[i]?t[i].value:this.level}}setScope(e){this.scope=e||this.scope}log(...e){this.logBase(e,t.LOG.value)}info(...e){this.logBase(e,t.INFO.value)}debug(...e){this.logBase(e,t.DEBUG.value)}warn(...e){this.logBase(e,t.WARN.value)}error(...e){this.logBase(e,t.ERROR.value)}logBase(e,i){if(this.level<=i){Object.values(t).find(e=>e.value===i).method(...this.getLogData(e))}}getLogData(e){if(Array.isArray(e)&&e.length>0){let t="%c RS SDK";this.scope&&(t=`${t} - ${this.scope}`);t=`${t} %c ${e[0].trim()}`;const i=[];return i.push(t),i.push("font-weight: bold; background: black; color: white;"),i.push("font-weight: normal;"),i.push(...e.slice(1)),i}return e}}("VWO");return e.VWO=class{constructor(e,t,i){t.logLevel&&n.setLogLevel(t.logLevel),this.analytics=t,this.accountId=e.accountId,this.settingsTolerance=e.settingsTolerance,this.isSPA=e.isSPA,this.libraryTolerance=e.libraryTolerance,this.useExistingJquery=e.useExistingJquery,this.sendExperimentTrack=e.sendExperimentTrack,this.sendExperimentIdentify=e.sendExperimentIdentify,this.name="VWO",({shouldApplyDeviceModeTransformation:this.shouldApplyDeviceModeTransformation,propagateEventsUntransformedOnError:this.propagateEventsUntransformedOnError,destinationId:this.destinationId}=i??{})}init(){const e=(t=this.analytics.loadOnlyIntegrations)&&(t.VWO||t.VWO);var t;if(e?.loadIntegration){const e=this.accountId,t=this.settingsTolerance,i=this.libraryTolerance,n=this.useExistingJquery,{isSPA:o}=this;!function(e,t,i,n,o){window._vwo_code=function(){let s=!1;const r=document;return{use_existing_jquery:()=>n,library_tolerance:()=>i,finish(){if(!s){s=!0;const e=r.getElementById("_vis_opt_path_hides");e&&e.parentNode.removeChild(e)}},finished:()=>s,load(e){const t=r.createElement("script");t.src=e,t.type="text/javascript",t.setAttribute("data-loader","RS_JS_SDK"),t.innerText,t.onerror=function(){_vwo_code.finish()},r.getElementsByTagName("head")[0].appendChild(t)},init(){const i=setTimeout("_vwo_code.finish()",t),n=r.createElement("style"),s="body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}",a=r.getElementsByTagName("head")[0];return n.setAttribute("id","_vis_opt_path_hides"),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(r.createTextNode(s)),a.appendChild(n),this.load(`//dev.visualwebsiteoptimizer.com/j.php?a=${e}&u=${encodeURIComponent(r.URL)}&r=${Math.random()}&f=${+o}`),i}}}(),window._vwo_settings_timer=window._vwo_code.init()}(e,t,i,n,o)}else n.info("loadIntegration flag is disabled");window.VWO=window.VWO||[],window.VWO.event=window.VWO.event||function(...e){window.VWO.push(["event",...e])},window.VWO.visitor=window.VWO.visitor||function(...e){window.VWO.push(["visitor",...e])},(this.sendExperimentTrack||this.experimentViewedIdentify)&&this.experimentViewed()}isLoaded(){return!!window._vwo_code}isReady(){return this.isLoaded()}experimentViewed(){window.VWO=window.VWO||[],window.VWO.push(["onVariationApplied",e=>{if(!e)return;const t=e[1],i=e[2];if(n.info("experiment id:",t,"Variation Name:",_vwo_exp[t].comb_n[i]),void 0!==_vwo_exp[t].comb_n[i]&&["VISUAL_AB","VISUAL","SPLIT_URL","SURVEY"].indexOf(_vwo_exp[t].type)>-1){try{this.sendExperimentTrack&&this.analytics.track("Experiment Viewed",{experimentId:t,variationName:_vwo_exp[t].comb_n[i],CampaignName:_vwo_exp[t].name,VariationId:i})}catch(e){n.error("experimentViewed",e)}try{this.sendExperimentIdentify&&this.analytics.identify({[`Experiment: ${t}`]:_vwo_exp[t].comb_n[i]})}catch(e){n.error("experimentViewed",e)}}}])}identify(e){const{message:t}=e,{traits:n}=t.context||t,o=(e=>{const t={};for(const n in e)t[i(n)]=e[n];return t})(n||{});window.VWO.visitor(o,{source:"rudderstack"})}track(e){const t=e.message.event;if(!t)return void n.error("[VWO] track:: event name is required");const o=e.message?.properties||{};if(window.VWO=window.VWO||[],"Order Completed"===t){const t=e.message.properties?e.message.properties.total||e.message.properties.revenue:0;window.VWO=window.VWO||[],window.VWO.push(["track.revenueConversion",t])}const s=i(t);n.debug(`[VWO] eventName: ${s}`),window.VWO.event(s,o,{source:"rudderstack",ogName:t})}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});
//# sourceMappingURL=VWO.min.js.map
